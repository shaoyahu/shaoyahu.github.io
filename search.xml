<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>vue通过node连接mysql数据库</title>
      <link href="/2022/08/16/vue%E9%80%9A%E8%BF%87node%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2022/08/16/vue%E9%80%9A%E8%BF%87node%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>学习关键语句：<br>vue连接mysql数据库<br>vue项目连接后台数据库配置<br>vue通过node连接MySQL数据库</p><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>为了快速学习nodejs制作后端并和数据库进行交互的方法,所以赶紧写一篇这样的文章出来,如果你对这篇文章中提到的内容有所疑惑,请飞快的将你的疑惑输入到下方评论区中!<br>另外一个真实原因是我在做这个练习时很难找到完整的教学性文章 , 所以决定分享一下经验</p><p><em>注意：本文在2022/8/16号已进行完善，此次完善的内容如下</em></p><ul><li>变为更符合真实项目的目录结构</li><li>axios请求二次封装</li><li>前端跨域处理完善</li></ul><blockquote><p>==文章末尾附带本文项目文件链接==</p></blockquote><blockquote><p>对于搜索自己问题找到这篇文章的网友,可以参考右边的菜单目录快速定位到你可能想找的内容</p></blockquote><h2 id="编写顺序"><a href="#编写顺序" class="headerlink" title="编写顺序"></a>编写顺序</h2><ol><li>编写前端页面</li><li>编写后端node服务器</li><li>编写node连接数据库</li><li>编写数据库交互</li><li>编写前后端交互</li></ol><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="1-编写前端页面"><a href="#1-编写前端页面" class="headerlink" title="1.编写前端页面"></a>1.编写前端页面</h3><h4 id="这里使用vue2脚手架快速搭建项目"><a href="#这里使用vue2脚手架快速搭建项目" class="headerlink" title="这里使用vue2脚手架快速搭建项目"></a>这里使用vue2脚手架快速搭建项目</h4><pre class="line-numbers language-none"><code class="language-none">vue create node-app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>选择 babel, router即可<br>建立好之后如下图<br><img src="https://img-blog.csdnimg.cn/cf6f3969ce9545b8bf023e6d2ca79c0e.png" alt="在这里插入图片描述"></p><h4 id="删除无需内容"><a href="#删除无需内容" class="headerlink" title="删除无需内容"></a>删除无需内容</h4><p>APP.vue<br>只保留路由切换<br><img src="https://img-blog.csdnimg.cn/647d66a7c79e48a3b361c33f0d8f839d.png" alt="在这里插入图片描述"><br>Home.vue 和 About.vue 全部清空,重新建立vue文件模板(template + script + style)</p><h4 id="制作登录页和首页"><a href="#制作登录页和首页" class="headerlink" title="制作登录页和首页"></a>制作登录页和首页</h4><p>将 Home.vue 当做登录页面, About.vue当做首页,这样就不用麻烦配置路由了,当做演示就很方便</p><h5 id="登录页"><a href="#登录页" class="headerlink" title="登录页"></a>登录页</h5><p><strong>登录页的功能需求 ： 输入账号密码完成登录操作，并根据登录情况给出响应提示</strong><br>制作登录页面, 放置两个 input 输入框和一个 button 按钮,并给上最基本的样式</p><blockquote><p>Home.vue</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"home"</span><span class="token operator">&gt;</span>    用户名 <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.username"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>    秘密码 <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"password"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.password"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"login"</span><span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">''</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token operator">*</span> <span class="token punctuation">{</span>  <span class="token literal-property property">margin</span><span class="token operator">:</span> 5px<span class="token punctuation">;</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> 5px<span class="token punctuation">;</span><span class="token punctuation">}</span>button <span class="token punctuation">{</span>  <span class="token literal-property property">width</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>  <span class="token literal-property property">height</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://img-blog.csdnimg.cn/8bbe3da2a33f48398104a968733dbefd.png" alt="在这里插入图片描述"></p><h5 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h5><p>首页就用来修改密码好了, 修改保存在数据库中的密码<br>首页功能需求 ： 修改用户密码 ， 查看用户个人信息</p><blockquote><p>About.vue</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"display:flex"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>      <span class="token literal-property property">用户名</span><span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'text'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">'form.username'</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>      <span class="token literal-property property">新密码</span><span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'text'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">'form.newPassword'</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>      <span class="token literal-property property">新密码</span><span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'text'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">'form.rePassword'</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">'update'</span><span class="token operator">&gt;</span>确认<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">'getUser'</span><span class="token operator">&gt;</span>查询<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"div2"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"userInfo.nickname"</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>用户信息<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>        <span class="token literal-property property">昵称</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userInfo<span class="token punctuation">.</span>nickname<span class="token punctuation">}</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"userInfo.gender != '无'"</span><span class="token operator">&gt;</span>        <span class="token literal-property property">性别</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userInfo<span class="token punctuation">.</span>gender<span class="token punctuation">}</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"userInfo.age != ''"</span><span class="token operator">&gt;</span>        <span class="token literal-property property">年龄</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userInfo<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token literal-property property">newPassword</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token literal-property property">rePassword</span><span class="token operator">:</span> <span class="token string">''</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://img-blog.csdnimg.cn/42465724d33a43b293994cd249a61398.png" alt="由于个人信息一开始时隐藏的所以我们看不到"><br>到这里,前端页面除了交互以外就已经完成了<br>接下来我们来编写后端 node服务器</p><h3 id="2-制作后端-node-服务器"><a href="#2-制作后端-node-服务器" class="headerlink" title="2.制作后端 node 服务器"></a>2.制作后端 node 服务器</h3><h4 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h4><p>新建文件夹, 起名为 node-server , 新建文件 app.js , 在终端中初始化项目</p><pre class="line-numbers language-none"><code class="language-none">npm initnpm i<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>完成之后 node-server 文件夹中会出现以下目录<br><img src="https://img-blog.csdnimg.cn/57d5e183f06c48348ad90b6b2f73fa9d.png" alt="在这里插入图片描述"></p><h4 id="编写-app-js"><a href="#编写-app-js" class="headerlink" title="编写 app.js"></a>编写 app.js</h4><p>我们想要制作服务器, 这里使用 express 来实现</p><pre class="line-numbers language-none"><code class="language-none">npm i --save express<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当然了, 我们还需要解决跨域问题, 这里使用 cors 来解决</p><pre class="line-numbers language-none"><code class="language-none">npm i --save cors<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>现在我们来考虑前端传参问题<br>对于get请求，其参数是直接拼接在url后面的，解析也相对容易。在express框架中，get请求的参数全部都被放置在了request对象的query中。<br>post请求有多种形式可以发送数据，这取决于post请求的请求头Content-type的内容，常见的有三种：</p><ul><li>multipart/form-data</li><li> application/x-www-form-urlencoded</li><li> application/json</li></ul><p>为此，我们引入中间件来解决读取参数的问题<br>这里使用 body-parser 和 connect-multiparty 来解决</p><pre class="line-numbers language-none"><code class="language-none">npm i --save body-parser<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">npm i --save connect-multiparty<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>接下来编写 app.js 文件</p><blockquote><p>app.js</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 导入 express</span><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token comment">// 创建 app</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 设置跨域访问</span><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 处理POST参数</span><span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token keyword">const</span> multiparty <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'connect-multiparty'</span><span class="token punctuation">)</span><span class="token comment">// 处理 x-www-form-urlencoded</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">extended</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 处理 application/json</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 处理 mutipart/form-data</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">multiparty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 测试接口能否正常调用</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/info'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"Hello shaoyahu !"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 启动</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'express server running at http://127.0.0.1:'</span> <span class="token operator">+</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来我们在控制台使用 node 命令就可以启动服务器了</p><pre class="line-numbers language-none"><code class="language-none">node app.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>最先看到控制台打印了消息<br><img src="https://img-blog.csdnimg.cn/6dac7bd59a91483fb46cd5933c399fd1.png" alt="在这里插入图片描述"></p><p>接下来我们在浏览器中打开看一看效果<br><img src="https://img-blog.csdnimg.cn/15ef6738a0d74e47a6deca036280f47e.png" alt="在这里插入图片描述"><br>太棒了 ! 我们已经完成了最简单的接口</p><h3 id="3-编写-node-连接数据库"><a href="#3-编写-node-连接数据库" class="headerlink" title="3.编写 node 连接数据库"></a>3.编写 node 连接数据库</h3><h4 id="编写-mysql-js-文件"><a href="#编写-mysql-js-文件" class="headerlink" title="编写 mysql.js 文件"></a>编写 mysql.js 文件</h4><p>我们在 node-server 文件夹下新建文件 mysql.js<br>首先, 我们需要安装 mysql</p><blockquote><p>本机安装<br>本机安装 mysql 服务请参考其他文章 , 这里不做详细介绍 , 大致行动为 : 下载安装包 , 点击安装 , 配置</p></blockquote><p>安装 mysql 依赖</p><pre class="line-numbers language-none"><code class="language-none">npm i --save mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编写 mysql.js 文件</p><blockquote><p>mysql.js</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token keyword">const</span> db_config <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'请输入你自己的账号, 一般为 root'</span><span class="token punctuation">,</span>  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">'请输入你自己的密码, 一般也为 root'</span><span class="token punctuation">,</span>  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">"3306"</span><span class="token punctuation">,</span><span class="token comment">// 默认使用3306端口号</span>  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'node_app'</span><span class="token comment">// 使用你自己创建的数据库名称,我这里使用 node_app</span><span class="token punctuation">}</span><span class="token comment">// 进行数据库交互</span><span class="token keyword">function</span> <span class="token function">conMysql</span><span class="token punctuation">(</span><span class="token parameter">sql</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> connect <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>db_config<span class="token punctuation">)</span>  <span class="token comment">// 开始链接数据库</span>  connect<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">mysql连接失败: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mysql连接成功!'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 返回一个Promise承诺对象</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    connect<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment">// 此处需要将返回数据转为JSON再转回来,否则原数据不为任何数据类型</span>        <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token function">closeMysql</span><span class="token punctuation">(</span>connect<span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// 查询成功后关闭mysql</span><span class="token keyword">function</span> <span class="token function">closeMysql</span><span class="token punctuation">(</span><span class="token parameter">connect</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  connect<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">mysql关闭失败:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mysql关闭成功!'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// 导出方法</span>exports<span class="token punctuation">.</span>conMysql <span class="token operator">=</span> conMysql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="测试数据库连接"><a href="#测试数据库连接" class="headerlink" title="测试数据库连接"></a>测试数据库连接</h4><p>我们在数据库中新建一张表 userinfo , 里面提前插入两条数据<br><img src="https://img-blog.csdnimg.cn/11c02af224d74e429e82be053b237d30.png" alt="在这里插入图片描述">继续编写 app.js 文件获取这两条数据</p><blockquote><p>app.js<br>在原有的基础上新增一个接口 , 位置放在 /info 下就可以</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 引入 mysql 方法</span><span class="token keyword">let</span> <span class="token punctuation">{</span> conMysql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./mysql'</span><span class="token punctuation">)</span><span class="token comment">// 获取全部用户信息，测试数据库连接的上不上</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getUser'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">'select * from userinfo'</span>  <span class="token function">conMysql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>同样我们在浏览器中打开</p><p><img src="https://img-blog.csdnimg.cn/3f3657f19a99480bb547fffb3833d562.png" alt="在这里插入图片描述"><br>测试成功 !</p><h3 id="4-实现登录、修改密码和获取用户信息接口"><a href="#4-实现登录、修改密码和获取用户信息接口" class="headerlink" title="4.实现登录、修改密码和获取用户信息接口"></a>4.实现登录、修改密码和获取用户信息接口</h3><p>接下来就是最重要的部分了 , 我们来实现登录、修改密码和获取用户信息的接口 , 同样的里面还包含了数据库的交互<br>但是 , 在此之前 , 我们先来统一返回的数据格式</p><blockquote><p>app.js<br>我们创建一个类来返回数据</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 创建统一的返回报文对象</span><span class="token keyword">class</span> <span class="token class-name">Response</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">isSucceed<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> code<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>isSucceed <span class="token operator">=</span> isSucceed<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h4><blockquote><p>app.js<br>登录方法我们使用 post 请求，想来没人希望自己的账号密码被人一眼看见吧</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 登录</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">select * from userinfo where username = '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'</span><span class="token template-punctuation string">`</span></span>  <span class="token function">conMysql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>password <span class="token operator">===</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'登录成功'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'用户名或密码错误'</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>      res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'数据库连接出错!'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中 , res.send() 方法默认返回状态码为 200 , 可以通过增加调用 .status() 方法返回想要返回的状态码</p><h4 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h4><blockquote><p>app.js<br>修改密码我们使用 post 请求</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 修改密码</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/updatePassword'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">update userinfo set password = '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>newPassword<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">' where username = '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'</span><span class="token template-punctuation string">`</span></span>  <span class="token function">conMysql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>affectedRows <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'修改成功'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'修改失败,请稍后重试'</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>      res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'数据库连接出错!'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="获取用户个人信息"><a href="#获取用户个人信息" class="headerlink" title="获取用户个人信息"></a>获取用户个人信息</h4><blockquote><p>app.js<br>获取用户个人信息我们使用 get 请求</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 获取当前用户信息</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getUserInfo'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">select * from userinfo where username = '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'</span><span class="token template-punctuation string">`</span></span>  <span class="token function">conMysql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'获取成功'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'数据库连接出错!'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样一来 , 我们登录、修改密码和获取个人信息都已经完成了 , 接下来只需要完成前后端交互就可以了 , 很显然的是 , 接下来的事应该是由前端开发来完成了 , ==所有如果有哪位有意向于前端开发的朋友阅读到这里 , 就可以尝试自己动手完成接下来的工作了==</p><h3 id="5-完成前后端交互"><a href="#5-完成前后端交互" class="headerlink" title="5.完成前后端交互"></a>5.完成前后端交互</h3><p>前后端交互我们使用 axios<br>安装依赖</p><pre class="line-numbers language-none"><code class="language-none">$ npm i --save axios<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="二次封装axios和请求"><a href="#二次封装axios和请求" class="headerlink" title="二次封装axios和请求"></a>二次封装axios和请求</h4><p>在src同级目录下新建文件 axios.js<br><img src="https://img-blog.csdnimg.cn/2676c5f571a743b8a6837da1345a9521.png" alt="在这里插入图片描述"><br>打开axios.js文件，我们进行简单封装</p><blockquote><p>axios.js<br>进行简单的封装，不添加拦截器</p></blockquote><p>为了简洁，同时相同请求地址的域名都是相同的，我们就可以将域名提出来统一放在最前面</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来进行请求的封装<br>在src目录下新建 api 文件夹同时在该文件夹下新增文件 user.js 专门存放和用户有关的接口请求<br><img src="https://img-blog.csdnimg.cn/57b8b93fd0624b08b824e6581d7a7e89.png" alt="在这里插入图片描述"><br>我们在 user.js 中封装三个方法，分别是登录，修改密码和查看个人信息</p><blockquote><p>user.js</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'../../axios'</span><span class="token comment">// 用户登录</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/login</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// 修改密码</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">updatePassword</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/updatePassword'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// 获取用户信息</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getUserInfo?username='</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当然了，前端也是会遇到跨域问题的，我们这里使用代理服务器来解决跨域问题<br>在src同级目录下新增 vue.config.js 文件 </p><blockquote><p>vue.config.js</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>由于我们将所有的 /api 都使用域名进行重写<br>所以我们再来修改 axios.js 文件</p><blockquote><p>axios.js</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>好了这样一来我们和发送请求相关的文件便写好了，现在要去写交互页面了</p><h4 id="添加登录功能"><a href="#添加登录功能" class="headerlink" title="添加登录功能"></a>添加登录功能</h4><blockquote><p>Home.vue<br>首先需要引入请求方法</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> userLogin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../api/user'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>再只需要对上面的 login 方法进行补充就可以了</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'about'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">alert</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样就可以完成登录功能了 , 接下来我们来处理修改密码</p><h4 id="添加修改密码功能"><a href="#添加修改密码功能" class="headerlink" title="添加修改密码功能"></a>添加修改密码功能</h4><blockquote><p>About.vue<br>首先需要引入请求方法</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> updatePassword<span class="token punctuation">,</span> getUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../api/user'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>再只需要对上面的 update 和 getUser 方法进行补充就可以了</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>username <span class="token operator">==</span> <span class="token string">''</span> <span class="token operator">||</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>newPassword <span class="token operator">==</span> <span class="token string">''</span> <span class="token operator">||</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>rePassword <span class="token operator">==</span> <span class="token string">''</span>  <span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'数据不能为空'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span>  <span class="token punctuation">}</span>  <span class="token function">updatePassword</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'修改密码后请重新登录'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">alert</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>如此一来 , 一个简单的前后端分离的项目就是有了雏形 , 虽然实现的功能非常简陋 , 但能让我在 js 这条路上再进一步 , 就是说非常高兴了</p><p>如果你对文中的内容有所疑惑或者觉得不对劲 , 请赶快到评论区给我留言 , 千万别耽误了</p><h2 id="文件链接"><a href="#文件链接" class="headerlink" title="文件链接"></a>文件链接</h2><blockquote><p>最后附上文件链接:<br><a href="https://download.csdn.net/download/shaoyahu/86402155">https://download.csdn.net/download/shaoyahu/86402155</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> node </tag>
            
            <tag> mysql </tag>
            
            <tag> 前后端分离 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人博客网址的第一篇新建博客</title>
      <link href="/2022/05/14/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/"/>
      <url>/2022/05/14/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>欢迎大家来到我的个人博客网址,现在还算是比较简陋的地方了。<br>那这么个第一篇博客到底写些什么东西呢?</p><p>首先，<strong>欢迎你!!</strong></p><p>既然都已经欢迎过了，接下来就写一写学习计划的安排吧，在这里随时可以看见也可以当做是激励我自己了，</p><p>事先说明，我实在是小菜鸟一个😂</p><p>学习计划</p><ol><li><p>Typescript</p><p>作为安全的js语言，若想要在前端的世界继续前进，这是非常有必要的</p></li><li><p>Vue3</p><p>已经升级到了正式推荐使用3版本的Vue自然是首当其冲需要学习的目标啦，作为使用ts的前端框架，也只好屈居于ts的学习之后咯</p></li><li><p>E-charts</p><p>图表能力可以说是不少地方都需要用到的，怎么可以就这样落下!!</p></li><li><p>React/Node.js</p><p>我承认有点人云亦云的味道了，所以在React和node之间我还是蛮犹豫的先学习哪一个，相比于已经学习了Vue来怎么说也是node更香吧</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue2组件封装 Vue组件封装</title>
      <link href="/2022/05/14/Vue2%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-Vue%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/"/>
      <url>/2022/05/14/Vue2%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-Vue%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>虽然是Vue2组件封装，主要的内容是记录一下我对封装组件的一些要点和我的看法<br>——原学习视频来源于b站黑马从0到1封装组件库</p><h2 id="什么是组件"><a href="#什么是组件" class="headerlink" title="什么是组件"></a>什么是组件</h2><p>都说Vue是组件化开发，确实有道理，别说按钮输入框这种组件了，就连每个页面，从本质来看也是一个个组件，所以目标很明确，拿来就能用，有一定使用规范和预设样式，我都认为是一个组件，包括有一定规范和预设样式的页面，也可以认为是一个组件</p><h2 id="可以写出什么组件？"><a href="#可以写出什么组件？" class="headerlink" title="可以写出什么组件？"></a>可以写出什么组件？</h2><p>关于如何去写自己的组件，我将它分为两块，一块是套路组件，一块是创新组件</p><ul><li>套路组件<br>什么是套路组件，为什么我称之为套路？<br>首先必须知道，无论你使用过哪个组件库，只要是见识过2个及2个以上的同学都会发现，组件库的内容其实大同小异<br>最常见的正如我上文所提到的按钮和输入框，基本所有的组件库都会有的内容，同时能发现在原Html代码中也可以使用到的相似元素，这样一想，那么组件库中按钮、输入框之类的组件相当于是对原有元素的二次包装。<br>使用的是已经有的元素，通过预设样式和编写使用文档制作出来的组件，这不就是套路嘛</li><li>创新组件<br>既然如此，那创新组件就很显然了，完全使用自己的想法编写出来的组件，不使用默认的元素进行包装<h2 id="如何去写一个组件"><a href="#如何去写一个组件" class="headerlink" title="如何去写一个组件"></a>如何去写一个组件</h2></li></ul><blockquote><p>受到一些专讲如何写Vue组件文章的影响，我觉得将编写组件的顺序步骤分为先编写静态页面和后动态交互是非常合理的，我们也应该从这一步出发</p><p><strong>编写静态组件</strong><br>这个其实非常好理解，假设你现在拥有一个非常完整的团队，请UI设计师为你设计一个组件后，你就可以按照组件的基本样子写出来了<br>这里以 NutUI 为例子，我们看如下图中的按钮，有着非常多的样式<br><img src="https://img-blog.csdnimg.cn/40a09eb44d0f4d3f8077d751c464d5ee.png" alt="NutUI中的样式其实看上去还挺少的……"><br>所有的样式都来源于类的切换，而CSS样式正是通过类绑定到元素上，所以在编写静态组件时，需要通过切换类名来制作出不同的样式效果<br>包括数据展示，静态页面优先使用假数据</p></blockquote><p><strong>动态交互编写</strong></p><blockquote><p>既然已经知道一个页面也相当于一个组件，而一个页面中使用组件时，就等同于父子组件，相对于按钮这种元素，输入框还需要父子间传递数据</p></blockquote><ul><li>使用 props 进行父对子传值<br>父组件书写子组件标签来使用子组件，通过 属性名=”属性值” 的方式来传递数据<br>子组件中需要写参数 props 来接收，通用组件需要对属性进行约束和校验,当然了约束和校验也可以不写<br>如下图中该按钮，通过传递一个类型为成功的数据来控制按钮的样式<br><img src="https://img-blog.csdnimg.cn/709043cd42bc4427989414bd9adde38a.png" alt="在这里插入图片描述"></li></ul><p>父组件中：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>apl<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"success"</span><span class="token operator">&gt;</span>你好<span class="token operator">&lt;</span><span class="token operator">/</span>apl<span class="token operator">-</span>button<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>子组件中：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"AplButton"</span><span class="token punctuation">,</span>  <span class="token comment">//封装一个通用组件，需要对属性进行约束进行校验</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token comment">// 按钮类型</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>      <span class="token comment">// 自定义验证函数</span>      <span class="token comment">// type值校验</span>      <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 这个值必须匹配下列字符串中的一个</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>          <span class="token punctuation">[</span>            <span class="token string">"default"</span><span class="token punctuation">,</span>            <span class="token string">"success"</span><span class="token punctuation">,</span>            <span class="token string">"primary"</span><span class="token punctuation">,</span>            <span class="token string">"danger"</span><span class="token punctuation">,</span>            <span class="token string">"warning"</span><span class="token punctuation">,</span>            <span class="token string">"info"</span><span class="token punctuation">,</span>          <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    。。。。。。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用props传值除了直接传值以外也可以通过添加v-bind传递表达式，只要将 type=””改为 :type=””</p><ul><li>通过 $emit 进行子对父传值</li></ul><blockquote><p>这里值得一提的是数据应该保存在哪个组件中，相比之下，父组件使用子组件修改了自己的数据比父组件使用子组件修改了子组件的数据听上去更加合理，这也是为什么会有父组件传值给子组件</p></blockquote><p>需要想通的是子在什么时候需要对父传值<br>即子组件需要修改父组件的值，不过我们知道我们需要遵守子组件不好直接修改数据的原则，所以最好让这个动作由父组件自己来完成，子组件在一旁做个看客这多妙<br>如下图这个dialog中，父组件的visible值来控制dialog的显示与隐藏，点击子组件的按钮时需要将父组件的visible值变为false来隐藏dialog，自然就不能子组件来改变visible的值，而是将需要改变的值传递给父组件，由父组件来改变visible<br><img src="https://img-blog.csdnimg.cn/8aa58034fd6d4f89820c6a7560f77b0c.png" alt="在这里插入图片描述"></p><p>父组件中：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>apl<span class="token operator">-</span>dialog width<span class="token operator">=</span><span class="token string">"80vh"</span> top<span class="token operator">=</span><span class="token string">"20vh"</span> <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"visible"</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token operator">:</span>title<span class="token operator">&gt;</span>标题<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>      点击右上角<span class="token constant">X</span>关闭这个网页<span class="token operator">&lt;</span><span class="token operator">/</span>apl<span class="token operator">-</span>dialog<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>子组件中：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//下面这行仅展示 X 的代码行</span>  <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"apl-dialog__headerbtn"</span> @click<span class="token punctuation">.</span>self<span class="token operator">=</span><span class="token string">"_handleClose"</span><span class="token operator">&gt;</span>x<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">_handleClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 使用sync语法糖</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"update:visible"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="对写好的组件进行装库打包"><a href="#对写好的组件进行装库打包" class="headerlink" title="对写好的组件进行装库打包"></a>对写好的组件进行装库打包</h2><ol><li>将所有组件放在同一个文件夹package中并新建文件index.js</li><li>将所有组件引入到index.js中并声明 install 函数依次为Vue注册全局组件</li><li>默认暴露 install</li></ol><p><strong>index.js内容如下</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 整个包的入口</span><span class="token keyword">import</span> AplButton <span class="token keyword">from</span> <span class="token string">'./AplButton'</span><span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">[</span>    AplButton<span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token comment">// 定义 install 方法，接收 Vue 作为参数，如果使用 use 注册插件，则必须所有的组件都被注册</span><span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// 遍历注册全局组件</span>    components<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">component</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>name<span class="token punctuation">,</span> component<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// 判断是否是直接引入文件，如果是，就不用调用 Vue.use()</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">install</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    install<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>为package.json中添加命令</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 以下这行为新增</span><span class="token string-property property">"main"</span><span class="token operator">:</span><span class="token string">"dist/wad-ui.umd.min.js"</span><span class="token punctuation">,</span><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token string-property property">"serve"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service serve"</span><span class="token punctuation">,</span>  <span class="token string-property property">"build"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service build"</span><span class="token punctuation">,</span>  <span class="token string-property property">"lint"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service lint"</span><span class="token punctuation">,</span>  <span class="token comment">// 以下这行为新增命令</span>  <span class="token string-property property">"lib"</span><span class="token operator">:</span><span class="token string">"vue-cli-service build --target lib packages/index.js"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用 npm run lib 命令进行打包动作<br>生成 dist 文件夹，此时打包已经完成了<br>接下来将组件库发布到 npm 上</p><p><strong>新增文件 .npmignore</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"># 忽略目录examples<span class="token operator">/</span>packages<span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span># 忽略指定文件vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>jsbabel<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js<span class="token operator">*</span><span class="token punctuation">.</span>map<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在终端登录 npm ，没有账号的需要注册账号然后登录<br><img src="https://img-blog.csdnimg.cn/256cf9c9965a44f7aa97026bf5b4cb97.png" alt="每次登录都需要一次性验证码真的好麻烦"><br>输入命令 后就发布完成了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">npm publish<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="使用自己的组件库"><a href="#使用自己的组件库" class="headerlink" title="使用自己的组件库"></a>使用自己的组件库</h2><ol><li>输入命令</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">npm i wad<span class="token operator">-</span>ui<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>进行全局导入</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">wad<span class="token operator">-</span>ui <span class="token keyword">import</span> WadUI <span class="token keyword">from</span> <span class="token string">'wad-ui'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'wad-ui/dist/wad-ui.css'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>WadUI<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="3"><li>愉快的使用自己的组件库</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>apl<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"toCheck"</span><span class="token operator">&gt;</span>确定<span class="token operator">&lt;</span><span class="token operator">/</span>apl<span class="token operator">-</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>分享一下我的源代码地址</p><blockquote><p><a href="https://github.com/shaoyahu/WadUI">https://github.com/shaoyahu/WadUI</a><br>其中有看别人写的抄了点拟态的，不过不是很合我的口味</p></blockquote><p>感谢阅读</p>]]></content>
      
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 封装组件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6~11新特性一网打尽!</title>
      <link href="/2022/05/02/ES6-11%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E7%BD%91%E6%89%93%E5%B0%BD/"/>
      <url>/2022/05/02/ES6-11%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E7%BD%91%E6%89%93%E5%B0%BD/</url>
      
        <content type="html"><![CDATA[<h2 id="ES6到ES11新特性学习"><a href="#ES6到ES11新特性学习" class="headerlink" title="ES6到ES11新特性学习"></a>ES6到ES11新特性学习</h2><p><strong>本笔记内容课程来源于B站尚硅谷视频学习记录</strong><br>文件下载链接：<a href="https://download.csdn.net/download/shaoyahu/85266922">https://download.csdn.net/download/shaoyahu/85266922</a><br>javascript ES6~11 新特性学习</p><p>ECMA 欧洲计算机制造商协会</p><h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a><strong>ES6</strong></h1><p>**</p><blockquote><p><strong>1.let 变量声明以及声明特性</strong></p></blockquote><p>**</p><pre><code>1.变量不能重复声明</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">//报错</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>2.块级作用域    (全局，函数，eval)</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">{</span>    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">//undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>3.不存在变量提升</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">//报错</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>4.不影响作用域链</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">{</span>    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">//1,从函数体找到外面</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>2.const 声明变量以及特点</strong></p></blockquote><pre><code>1.一定要赋初始值</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> a<span class="token punctuation">;</span>    <span class="token comment">//报错</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>2.一般常量使用大写(潜规则)</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>3.常量的值不能修改</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">2</span>   <span class="token comment">//报错</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>4.块级作用域</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span>  <span class="token comment">//报错</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>5.对于数组和对象的元素修改，不算做对常量的修改，不会报错</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">TEAM</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token constant">TEAM</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>  <span class="token comment">//正常执行</span><span class="token keyword">const</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'shaoyahu'</span><span class="token punctuation">}</span><span class="token constant">OBJ</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>    <span class="token comment">//正常执行 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>3.变量的解构赋值</strong></p></blockquote><pre><code>ES6 允许按照一定模式从数组和对象中提取值，对变量进行赋值1.数组的解构 - 变量名可以不同</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">TEAM</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token keyword">let</span> <span class="token punctuation">[</span>aa<span class="token punctuation">,</span>bb<span class="token punctuation">,</span>cc<span class="token punctuation">,</span>dd<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">TEAM</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aa<span class="token punctuation">)</span> <span class="token comment">//'a'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span> <span class="token comment">//'b'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cc<span class="token punctuation">)</span> <span class="token comment">//'c'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dd<span class="token punctuation">)</span> <span class="token comment">//'d'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2.对象的解构 - 变量名要求相同</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'shaoyahu'</span><span class="token punctuation">,</span>    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>    <span class="token function-variable function">read</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'read something !'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>read<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">OBJ</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>  <span class="token comment">//'shaoyahu'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>   <span class="token comment">//18</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span>   <span class="token comment">//function(){console.log('read something !')}</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token comment">//read something !</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>4.模板字符串</strong></p></blockquote><pre><code>ES6 引入新的声明字符串的方式 ``1.声明</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">字符串一个</span><span class="token template-punctuation string">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>2.内容中可以直接出现换行符(可以直接换行)</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;ul&gt;            &lt;li&gt;1&lt;/li&gt;            &lt;li&gt;2&lt;/li&gt;        &lt;/ul&gt;</span><span class="token template-punctuation string">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>3.变量拼接</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'shaoyahu'</span><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,今年</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">//我叫shaoyahu，今年18</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>5.对象的简化写法</strong></p></blockquote><pre><code>ES6 允许在大括号里面，直接写入变量和函数，作为对象的属性和方法1.书写简洁</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'shaoyahu'</span><span class="token keyword">let</span> <span class="token function-variable function">read</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'do some reading !'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token constant">PERSON</span> <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">,</span>    read<span class="token punctuation">,</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'run now !'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token constant">PERSON</span><span class="token punctuation">.</span>name     <span class="token comment">// 'shaoyahu'</span><span class="token constant">PERSON</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// do some reading !</span><span class="token constant">PERSON</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// run now !</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>6.箭头函数以及声明特点</strong></p></blockquote><pre><code>ES6 允许使用箭头(=&gt;)定义函数适合与 this 无关的回调，定时器，数组的方法回调不适合与 this 有关的回调，事件回调，对象的方法1.声明一个函数</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> a<span class="token punctuation">}</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2.this是静态的，始终指向函数声明时所在作用域下的this的值</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>window<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'shaoyahu'</span><span class="token keyword">const</span> <span class="token constant">PERSON</span> <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'邵雅虎'</span><span class="token punctuation">}</span><span class="token comment">//直接调用</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// shaoyahu</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// shaoyahu</span><span class="token comment">//call调用</span><span class="token function">fn1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token constant">PERSON</span><span class="token punctuation">)</span>  <span class="token comment">// 邵雅虎</span><span class="token function">fn2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token constant">PERSON</span><span class="token punctuation">)</span>  <span class="token comment">// shaoyahu</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>3.不能作为构造函数实例化对象</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">}</span><span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'shaoyahu'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>me<span class="token punctuation">)</span> <span class="token comment">// 报错:Person不是一个构造器</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>4.不能使用arguments变量</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">// 报错:arguments未定义</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>5.箭头函数的简写    1.省略小括号，当形参有且只有一个时</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> a<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>    2.省略花括号，当代码体只有一条语句时,此时return必须省略，而且语句的执行结果就是函数的返回值</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>7.函数参数默认值设置</strong></p></blockquote><pre><code>ES6 允许给函数参数赋值初始值1.形参初始值 - 具有默认值的参数，一般位置要靠后(潜规则)</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">3</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">}</span><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment">// fn(1,2,3)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>     <span class="token comment">// 6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2.与解构赋值结合使用 - 无需考虑顺序，只需要属性名对上</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> d<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d<span class="token punctuation">}</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>    <span class="token literal-property property">d</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>8.rest 参数</strong></p></blockquote><pre><code>ES6 引入 rest 参数，用于获取函数的实参，用来代替 arguments1.获取实参</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'shaoyahu'</span><span class="token punctuation">,</span><span class="token string">'邵雅虎'</span><span class="token punctuation">)</span> <span class="token comment">// ['shaoyahu','邵雅虎']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2.rest 参数必须要放到参数最后</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>   <span class="token comment">// [3,4,5]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>9.扩展运算符</strong></p></blockquote><pre><code>ES6 扩展运算符能将数组转换为逗号分隔的参数序列1.分隔数组</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">}</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>nums<span class="token punctuation">)</span> <span class="token comment">// 6 = 1 + 2 + 3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>10.Symbol 的介绍和创建</strong></p></blockquote><pre><code>ES6 引入了一种新的原始数据类型 Symbol，表示独一无二的值，他是JavaScript语言的第七种数据类型，是一种类似于字符串的数据类型1.特点    1.Symbol 的值是唯一的，用来解决命名冲突的问题    2.Symbol 值不能与其他数据进行运算    3.Symbol 定义的对象属性不能使用 for...in 循环遍历，但是可以使用 Reflect.ownKeys 来获取对象的所有键名</code></pre><ul><li><pre><code>  // 数据类型总结</code></pre></li><li><pre><code>  // USONB you are so niubility</code></pre></li><li><pre><code>  // u undefined</code></pre></li><li><pre><code>  // s string symbol</code></pre></li><li><pre><code>  // o object</code></pre></li><li><pre><code>  // n null number</code></pre></li><li><pre><code>  // b boolean</code></pre></li></ul><pre><code>2.Symbol 内置值 -&gt; Symbol的属性作为对象的属性来使用 (用到再学，机会不大)</code></pre><blockquote><p><strong>11.迭代器 Iterator</strong></p></blockquote><pre><code>Iterator是一种接口，为各种不同的数据结构提供统一的访问机制，任何数据解构只要部署 Iterator 接口，就可以完成遍历操作ES6 创造了一种新的遍历命令 for...of 循环，Iterator接口主要供 for...of 消费原生具备 Iterator 接口的数据    Array    arguments    Set    Map    String    TypedArray    NodeList工作原理    1.创建一个指针对象，指向当前数据结构的起始位置    2.第一次调用对象的next方法，指针自动指向数据结构的第一个成员    3.接下来不断调用next方法，指针一直向后移动，知道指向最后一个成员    4.每调用next方法返回一个包含value和done属性的对象</code></pre><blockquote><p><strong>12.生成器</strong></p></blockquote><pre><code>ES6 提供的一种异步编程解决方案，语法行为与传统函数完全不同</code></pre><blockquote><p><strong>13.promise</strong></p></blockquote><pre><code>ES6 引入的异步编程的新解决方案，语法上是一个构造函数用来封装异步操作并可以获取其成功或失败的结果const p = new Promise((resolve,reject)=&gt;{})</code></pre><blockquote><p><strong>14.Set</strong></p></blockquote><pre><code>ES6 提供了新的数据结构 Set (集合)，它类似于数组，但是成员的值都是唯一的，集合实现了 iterator接口，所以可以使用扩展运算符和 for..of 进行遍历集合的属性和方法1.size      返回集合的元素个数2.add       增加一个新元素，返回当前集合3.delete    删除元素，返回boolean值4.has       检测集合中是否包含某个元素，返回boolean值</code></pre><blockquote><p><strong>15.Map</strong></p></blockquote><pre><code>ES6 提供了 Map 数据结构，它类似于对象，也是键值对的集合，但是键的范围不限于字符串，各种类型的值包括对象都可以当作键。 Map 也实现了iterator接口，所以可以使用扩展运算符和 for...of 进行遍历Map的属性和方法1.size      返回 Map 的元素个数2.set       增加一个新元素，返回当前 Map 3.get       返回键名对象的键值4.has       检测 Map 中是否包含某个元素，返回boolean值5.clear     清空集合 ，返回 undefined</code></pre><blockquote><p><strong>16.class 类</strong></p></blockquote><pre><code>ES6 提供了更接近传统语言的写法，引入了 Class 类这个概念，作为对象的模板。通过 class 关键字，可以定义类，基本上，ES6的class可以看作只是一个语法糖，它的绝大部分功能，ES5都可以做到，新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已知识点1.class声明类2.constructor定义构造函数初始化3.extends继承父类4.super调用父级构造方法5.static定义静态方法和属性6.父类方法可以重写</code></pre><blockquote><p><strong>17.模块化</strong></p></blockquote><pre><code>模块化是指将一个大的程序文件，拆分成许多小的文件，然后将小文件组合起来1.模块化的优势    1.防止命名冲突    2.代码复用    3.高维护性2.模块化规范产品 ES6 之前的模块化规范有    1.CommonJS =&gt; NodeJS、Browserify    2.AMD      =&gt; requireJS    3.CMD      =&gt; seaJS3.ES6 模块化语法    模块功能主要由两个命令构成：export和import    export命令用于规定模块的对外接口    import命令用于输入其他模块提供的功能    分别暴露、统一暴露、默认暴露</code></pre><h2 id="ES7"><a href="#ES7" class="headerlink" title="ES7"></a>ES7</h2><blockquote><p><strong>18.Array.prototype.includes</strong></p></blockquote><pre><code>ES7 提供 includes 方法来检测数组中是否包含某个元素，返回布尔值类型</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'D'</span><span class="token punctuation">]</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span>   <span class="token comment">//true</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'E'</span><span class="token punctuation">)</span>   <span class="token comment">//false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>**19.指数操作符 ****</p></blockquote><pre><code>ES7 提供 ** 指数运算符，用来实现幂运算，功能与Math.pow结果相同</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span> <span class="token comment">// 8</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ES8"><a href="#ES8" class="headerlink" title="ES8"></a>ES8</h2><blockquote><p><strong>20.async 函数</strong></p></blockquote><pre><code>ES8 提供 async 函数async函数返回值为promise对象且这个对象的结果由async函数执行的返回值决定当返回值不是一个promise对象，那就返回成功的promise</code></pre><blockquote><p><strong>21.await 表达式</strong></p></blockquote><pre><code>1.await 必须写在async函数中2.await 右侧的表达式一般为promise对象3.await 返回的时promise成功的值4.await 的promise失败了就会抛出异常，需要通过try...catch捕获处理</code></pre><blockquote><p><strong>22.对象方法扩展</strong></p></blockquote><pre><code>ES8 提供新的对象方法1.Object.values    返回一个给定对象的所有可枚举属性 值 的数组</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> school<span class="token operator">=</span><span class="token punctuation">{</span>    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'一小'</span><span class="token punctuation">,</span>    <span class="token literal-property property">add</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'浙江'</span><span class="token punctuation">,</span><span class="token string">'温州'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span>   <span class="token comment">// ['一小',['浙江','温州']]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2.Object.entries    返回一个给定对象自身可遍历属性[key,value]的数组</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span>  <span class="token comment">// [['name','一小'],['add',['浙江','温州']]]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>3.Object.getOwnPropertyDescriptors    返回对象属性的描述对象</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>school<span class="token punctuation">)</span>    <span class="token comment">// name:{value:'一小',writable:true,enumerable:true,configurable:true}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ES9"><a href="#ES9" class="headerlink" title="ES9"></a>ES9</h2><blockquote><p><strong>23.扩展运算符</strong></p></blockquote><pre><code>ES9 为对象提供了像数组一样的 rest 参数和扩展运算符</code></pre><blockquote><p><strong>24.正则扩展-命名捕获分组</strong></p></blockquote><pre><code>ES9 提供正则的命名捕获分组</code></pre><blockquote><p><strong>25.正则扩展-反向断言</strong></p></blockquote><pre><code>ES9 提供反向断言 (?&lt;=)</code></pre><blockquote><p><strong>26.正则扩展-dotAll模式</strong></p></blockquote><pre><code>.*</code></pre><h2 id="ES10"><a href="#ES10" class="headerlink" title="ES10"></a>ES10</h2><blockquote><p><strong>27.对象方法扩展</strong></p></blockquote><pre><code>ES10 提供新的对象方法1.Object.fromEntries</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//二维数组</span><span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'邵雅虎'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'18,20,22'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//Map</span><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'邵雅虎'</span><span class="token punctuation">)</span><span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>28.字符串方法扩展</strong></p></blockquote><pre><code>ES10 提供新的字符串方法1.trimStart     清除字符串左侧空白2.trimEnd    清除字符串右侧空白</code></pre><blockquote><p><strong>29.数组方法扩展</strong></p></blockquote><pre><code>ES10 提供新的数组方法1.flat    将多维数组转化为低维数组</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// [1,2,3,4,5]</span><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// [1,2,3,4,[5,6]]</span><span class="token comment">// 参数为深度 是一个数字，默认值是1</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// [1,2,3,4,5,6]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>2.flatMap</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>item <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// [[10],[20],[30],[40]]</span>arr<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>item <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// [10,20,30,40]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>30.Symbol扩展</strong></p></blockquote><pre><code>ES10 提供新的Symbol方法1.Symbol.prototype.description    获取Symbol的字符串描述</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token string">'邵雅虎'</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span>description   <span class="token comment">// 邵雅虎</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ES11"><a href="#ES11" class="headerlink" title="ES11"></a>ES11</h2><blockquote><p><strong>31.私有属性</strong></p></blockquote><pre><code>ES11 新增私有属性</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>    <span class="token comment">//共有属性</span>    name    <span class="token comment">//私有属性</span>    #age    #hobby    <span class="token comment">//构造方法</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>hobby</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name        <span class="token keyword">this</span><span class="token punctuation">.</span>#age <span class="token operator">=</span> age        <span class="token keyword">this</span><span class="token punctuation">.</span>#hobby <span class="token operator">=</span> hobby    <span class="token punctuation">}</span>    <span class="token function">intro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#age<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#hobby<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//实例化</span><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'邵雅虎'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">'read'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 邵雅虎</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>#age<span class="token punctuation">)</span> <span class="token comment">// 报错获取不到</span>p<span class="token punctuation">.</span><span class="token function">intro</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 邵雅虎 18 read</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>32.Promise.allSettled</strong></p></blockquote><pre><code>ES11 新增方法</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'数据1'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'数据2'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//调用 allSettled 方法</span>Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 总是为成功，返回的数组中的结果由p1,p2决定</span><span class="token comment">//调用 all 方法</span>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 都成功为成功，有失败为失败</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>33.字符串方法扩展</strong></p></blockquote><pre><code>ES11 提供新的字符串方法1.String.prototype.matchAll    用来得到正则批量匹配的结果</code></pre><blockquote><p><strong>34.可选链操作符</strong></p></blockquote><pre><code>ES11 新增可选链操作符 ?.省略层层判断的操作</code></pre><blockquote><p><strong>35.动态import   =&gt; 按需加载、懒加载</strong></p></blockquote><pre><code>可以动态引入 import    静态引入 一开始就加载进来</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> m <span class="token keyword">from</span> <span class="token string">'./练习使用附件/29模块化js文件.js'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>    动态引入 使用时才加载进来</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./练习使用附件/29模块化js文件.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    module<span class="token punctuation">.</span><span class="token function">teach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>36.BigInt类型</strong></p></blockquote><pre><code>ES11 提供新的数据类型大整形 BigInt1.声明 在正常的定义整形的末尾加个n</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">123n</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>2.将普通整数转为大整形 浮点型会报错，只能使用整数</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">123</span><span class="token function">BigInt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>   <span class="token comment">// 123n</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>3.大数值运算</code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> max <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span>max<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> max<span class="token operator">+</span><span class="token number">2</span>  <span class="token comment">//true</span><span class="token function">BigInt</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1n</span> <span class="token operator">==</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2n</span> <span class="token comment">//false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>37.绝对全局对象 globalThis</strong></p></blockquote><pre><code>ES11 新增globalThis全局绝对对象，始终指向全局对象</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>vue2 vant2 sticky 吸顶自适应处理方法</title>
      <link href="/2022/02/13/vue2-vant2-sticky-%E5%90%B8%E9%A1%B6%E8%87%AA%E9%80%82%E5%BA%94%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/"/>
      <url>/2022/02/13/vue2-vant2-sticky-%E5%90%B8%E9%A1%B6%E8%87%AA%E9%80%82%E5%BA%94%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="开头要说的"><a href="#开头要说的" class="headerlink" title="开头要说的"></a>开头要说的</h1><p>本文解决的问题是，在使用vue2 使用vant2制作移动端应用时对于tab吸顶问题不能自适应的问题</p><h2 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h2><p>既然是要给tab一个吸顶，那必然是控制吸顶距离随着移动设备长宽变化而变化<br>在使用rem作为单位的前提下<br>在页面的style 使用css编写<br>如果使用scoped编写样式，则需要选择使用以下深度选择器<br>    scss   -&gt;     ::v-deep<br>    less    -&gt;     /deep/<br>    css     -&gt;     &gt;&gt;&gt;</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">.</span>van<span class="token operator">-</span>sticky<span class="token punctuation">{</span>  <span class="token literal-property property">top</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">.</span>28rem<span class="token punctuation">;</span><span class="token comment">/*这里填入你需要吸顶到顶部的距离*/</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>即可。</p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>为什么？<br>使用tab自带的offset-top属性只支持px为单位且无法跟着自适应<br>怎么找？<br>在页面的元素中，找到tab可以看到外部自动包一个class为van-sticky的div，接下来修改这个类即可</p><h2 id="其他解决办法"><a href="#其他解决办法" class="headerlink" title="其他解决办法"></a>其他解决办法</h2><p>其他解决办法可以参考这篇文章，链接在末尾<br>1.将tab和tabs分开到两个div中<br>    好处：可以自由控制样式<br>    坏处：无法使用tab自带的属性例如滑动切换<br>2.页面加载时获取需要吸顶距离的大小，通过offset-top动态设置<br>    将需要吸顶的距离的元素header的高+边框+内边距this.$refs.header.offsetHeight赋值给某个变量，再将此变量与offset-top单向数据绑定</p><p>参考文章链接：<a href="https://www.freesion.com/article/3379901694/">https://www.freesion.com/article/3379901694/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> vant </tag>
            
            <tag> sticky </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS中使用上下左右键盘控制元素移动</title>
      <link href="/2020/04/21/JS%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%8A%E4%B8%8B%E5%B7%A6%E5%8F%B3%E9%94%AE%E7%9B%98%E6%8E%A7%E5%88%B6%E5%85%83%E7%B4%A0%E7%A7%BB%E5%8A%A8/"/>
      <url>/2020/04/21/JS%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%8A%E4%B8%8B%E5%B7%A6%E5%8F%B3%E9%94%AE%E7%9B%98%E6%8E%A7%E5%88%B6%E5%85%83%E7%B4%A0%E7%A7%BB%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p> 想要使用js实现操作上下左右键盘控制页面中元素移动，需要解决的问题有，</p><p>如何获取按键触发信息<br>如何使用已触发的按键信息移动元素<br>元素和样式<br>    <style></p><pre><code>    #car&#123;        width: 64px;        height: 51px;        background-image: url(&#39;选上我最爱的小汽车！&#39;);        background-size: cover;        position: absolute;        left: 500px;        top: 300px;    &#125;&lt;/style&gt;</code></pre><body><pre><code>&lt;div id=&quot;car&quot; &gt;&lt;/div&gt;</code></pre></body><p>使用绝对定位将小汽车的位置布局在页面中间差不多的地方</p><p><img src="https://img-blog.csdnimg.cn/20200421204001626.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYW95YWh1,size_16,color_FFFFFF,t_70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>js代码<br>    <script></p><pre><code>    window.onload = function()&#123;        var car = document.getElementById(&#39;car&#39;);        document.onkeydown = function(event)&#123;            console.log(event.keyCode);            switch(event.keyCode)&#123;                case 37:car.style.left = car.offsetLeft-10+&#39;px&#39;;break;                case 38:car.style.top = car.offsetTop-10+&#39;px&#39;;break;                case 39:car.style.left = car.offsetLeft+10+&#39;px&#39;;break;                case 40:car.style.top = car.offsetTop+10+&#39;px&#39;;break;            &#125;        &#125;    &#125;&lt;/script&gt;</code></pre><p>获取按键按下事件</p><p>document.onkeydown = function(event){<br>            console.log(event.keyCode);</p><p>}</p><p>获取到上下左右分别为38，40，37，39</p><p>修改属性时，由于dom.style只能获取行内样式，所以对于</p><p>console.log(car.style.left);</p><p>这样的式子得到的为空字符串empty string</p><p>若是写在行内样式则获得”500px”字符串</p><p>而使用dom.offset获得的为数值，直接修改后加上字符串”px”再赋值给dom.style即可</p></style></p>]]></content>
      
      
      
        <tags>
            
            <tag> 原生JS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
